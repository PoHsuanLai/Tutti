[workspace]
members = [
    "crates/tutti-core",
    "crates/tutti-midi",
    "crates/tutti-sampler",
    "crates/tutti-dsp",
    "crates/tutti-plugin",
    "crates/tutti-neural",
    "crates/tutti-analysis",
    "crates/tutti-export",
]
resolver = "2"

[package]
name = "tutti"
version = "0.0.1"
edition = "2021"
description = "Real-time audio engine - umbrella crate coordinating modular audio subsystems"
license = "MIT OR Apache-2.0"
repository = "https://github.com/PoHsuanLai/Tutti"
keywords = ["audio", "dsp", "midi", "synthesis", "real-time"]
categories = ["multimedia::audio", "multimedia"]

[features]
# Default: just core audio engine
default = []

# Full feature set (everything enabled)
full = [
    "midi",
    "sampler",
    "soundfont",
    "plugin",
    "neural",
    "analysis",
    "export",
    "spatial-audio",
]

# MIDI subsystem
midi = ["dep:tutti-midi"]

# Sampler subsystem
sampler = ["dep:tutti-sampler"]
soundfont = ["sampler", "tutti-sampler/soundfont"]

# DSP features
spatial-audio = ["tutti-dsp/spatial-audio"]

# Analysis tools
analysis = ["dep:tutti-analysis"]

# Export
export = ["dep:tutti-export"]

# Plugin hosting
plugin = ["dep:tutti-plugin"]

# Neural audio
neural = ["dep:tutti-neural", "tutti-core/neural"]

# Legacy compatibility (for existing dependents - to be removed)
minimal = []
standard = ["midi", "sampler"]
wasm = []
gpu = ["neural"]
audio-input = ["sampler"]
butler = ["sampler"]
recording = ["sampler"]
midi-io = ["midi"]

[dependencies]
# Core audio graph runtime (always included)
tutti-core = { path = "crates/tutti-core", default-features = false }

# DSP nodes (always included for basic effects)
tutti-dsp = { path = "crates/tutti-dsp", default-features = false }

# Optional subsystems
tutti-midi = { path = "crates/tutti-midi", optional = true, default-features = false }
tutti-sampler = { path = "crates/tutti-sampler", optional = true, default-features = false }
tutti-analysis = { path = "crates/tutti-analysis", optional = true }
tutti-export = { path = "crates/tutti-export", optional = true, default-features = false }
tutti-plugin = { path = "crates/tutti-plugin", optional = true }
tutti-neural = { path = "crates/tutti-neural", optional = true }

# FunDSP for DSP toolkit
fundsp = { git = "https://github.com/PoHsuanLai/fundsp.git", default-features = false, features = ["std"] }

[dev-dependencies]
approx = "0.5"
