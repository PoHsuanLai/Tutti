[workspace]
members = [
    "crates/tutti-core",
    "crates/tutti-midi",
    "crates/tutti-sampler",
    "crates/tutti-synth",
    "crates/tutti-dsp",
    "crates/tutti-plugin",
    "crates/tutti-neural",
    "crates/tutti-analysis",
    "crates/tutti-export",
]
resolver = "2"

[package]
name = "tutti"
version = "0.0.1"
edition = "2021"
description = "Real-time audio engine - umbrella crate coordinating modular audio subsystems"
license = "MIT OR Apache-2.0"
repository = "https://github.com/PoHsuanLai/Tutti"
keywords = ["audio", "dsp", "midi", "synthesis", "real-time"]
categories = ["multimedia::audio", "multimedia"]

[features]
# Default: Core DAW functionality (export, sampler, analysis, spatial audio always included)
default = []

# Full feature set (everything enabled)
full = ["midi", "synth", "soundfont", "plugin", "neural"]

# Optional subsystems (heavy/complex dependencies)
midi = ["dep:tutti-midi", "tutti-core/midi", "tutti-synth?/midi"]
synth = ["dep:tutti-synth"]
soundfont = ["synth", "tutti-synth/soundfont", "tutti-synth/midi"]
plugin = ["dep:tutti-plugin"]
neural = ["dep:tutti-neural", "tutti-core/neural"]

[dependencies]
# Core subsystems (always included)
tutti-core = { path = "crates/tutti-core", default-features = false }
tutti-dsp = { path = "crates/tutti-dsp", default-features = false }
tutti-sampler = { path = "crates/tutti-sampler", default-features = false }
tutti-analysis = { path = "crates/tutti-analysis" }
tutti-export = { path = "crates/tutti-export", default-features = false }

# Optional subsystems (heavy/complex dependencies)
tutti-midi = { path = "crates/tutti-midi", optional = true, default-features = false }
tutti-synth = { path = "crates/tutti-synth", optional = true, default-features = false }
tutti-plugin = { path = "crates/tutti-plugin", optional = true }
tutti-neural = { path = "crates/tutti-neural", optional = true }

# FunDSP for DSP toolkit (fork with as_any methods for downcasting)
fundsp = { git = "https://github.com/PoHsuanLai/fundsp.git", default-features = false, features = ["std"] }

[dev-dependencies]
approx = "0.5"

# Example-specific feature requirements
[[example]]
name = "midi_synth"
required-features = ["midi", "synth"]

[[example]]
name = "neural_synth"
required-features = ["neural"]

[[example]]
name = "plugin_host"
required-features = ["plugin"]

# recording example now works by default (sampler & export are always included)
